---
layout: post
title: "hbase学习笔记"
description: 
modified: 2016-02-12
category: Hadoop
tags: [Hadoop, Hbase]
comments: true
mathjax: 
---
{% highlight linenos %}
{% endhighlight %}

- 是一个在HDFS上开发的面向列的分布式数据库

- 典型应用webtable，一个以网页URL为主键的表，其中包含爬取的页面和页面的属性

- 区域
    - HBase自动把表水平分成“区域”

- 实现

    - 用一个Master节点协调管理一个或多个Regionserver从属机
    - HBase主控机负责启动和全新的安装，把区域分配给注册的Regionserver，恢复Regionserver的故障

- 可使用的文件系统接口

    - 本地文件系统
    - KFS文件系统
    - Amazon S3
    - HDFS
- HBase
    - -ROOT-目录

        - 包含.META.表的区域列表
    - .META.目录

        - 包含所有用户空间的区域列表

    - 特性

        - 没有真正的索引

            - 行是顺序存储的，每行中的列也是

        - 自动分区

            - 表增长的时候，表会自动分区，并分布到可用节点

        - 线性扩展和对新节点的自动处理

            - 增加一个节点，把它指向现有集群，并运行Regionserver，区域自动重新平衡，负载会均匀分布

        - 普通商用硬件的支持

        - 容错

            - 节点多意味着每个节点重要性不突出，不必担心单点失效

        - 批处理

- 典型RDBMS扩展-成功服务的成长

    - 收到过多读请求

        - 用memcached缓存常用查询，读不再是严格意义的ACID，缓存数据在某个时间到期

    - 对服务的使用增多，数据库收到太多的写请求

        - 换更高性能的服务器，垂直升级MySQL

    - 增加了查询复杂度，包含多次连接操作

        - 对数据进行了反规范化以减少连接次数

    - 服务被广泛运用，所有服务都变慢了

        - 停止使用服务器端计算

    - 有些查询仍很慢

        - 定期对最复杂的查询进行预物化，尝试在大多数情况停止使用连接

    - 读性能尚可，写越来越慢

        - 放弃使用二级索引以及触发器